#include<stdio.h>
void worst_fit(int n_process,int n_blocks,int blocksize[],int processsize[]);
int main()
{
    int n_process, n_blocks;
   int blocksize[10];
    int processsize[10];
    int i;
    printf("enter number of processes\n");
    scanf("%d",&n_process);
    printf("enter number of blocks\n");
    scanf("%d",&n_blocks);
    
    printf("enter block size\n");
    for(i=0;i<n_blocks;i++)
    scanf("%d",&blocksize[i]);
    
     printf("enter process size\n");
    for(i=0;i<n_process;i++)
    scanf("%d",&processsize[i]);
    
    worst_fit(n_process,n_blocks,blocksize,processsize);
    
    
    return 0;
}
void worst_fit(int n_process,int n_blocks,int blocksize[],int processsize[])
{
   //Block allocations for process
    int allocation[n_process];

    //Initially allocate the index of -1 to all allocation blocks
    for (int i=0;i<n_process;i++)
    {
        allocation[i]=-1;
    }

    //Fetching the process
    for (int i=0;i<n_process;i++)
    {
        //Setting the index with maximal wastage
        int best_idx=-1;
        //Keeping the track of free space in best block
        int diff;
        
        //Running for-loop over blocksizes 
        for (int j=0;j<n_blocks;j++)
        {
            if (blocksize[j]>=processsize[i])
            {
                //Choosing first block as the best allocated block
                if (best_idx==-1)
                {
                    diff=blocksize[j]-processsize[i];
                    best_idx=j;
                }
                else
                {
                    int inter=blocksize[j]-processsize[i];
                    //Check if this free space is less than that of current best
                    if (diff<inter)
                    {
                        diff=inter;
                        best_idx=j;
                    }
                }
            }
        }

        if (best_idx==-1)
            continue;

        //At the end allot the block to process and re-calculate free-space
        blocksize[best_idx]=processsize[i];
        allocation[i]=best_idx;
    }
    
    //Now printing the allocation array
    for(int i=0;i<n_process;i++)
    {
        if (allocation[i]!=-1)
            printf("\nBlock for Process No %d with Size %d is %d",i+1,processsize[i],allocation[i]+1);
        else
            printf("\nBlock for Process No %d with Size %d cannot be allocated",i+1,processsize[i]);
    }
}enter number of processes
3
enter number of blocks
3
enter block size
100
200
300
enter process size
80
100
try
150

Block for Process No 1 with Size 80 is 3
Block for Process No 2 with Size 100 is 2
Block for Process No 3 with Size 150 cannot be allocated

